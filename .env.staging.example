# Staging Environment Configuration
# This file is used in Railway for the staging environment
# All values are managed through Railway Secret Manager

# Application Environment
NODE_ENV=staging
DEBUG=false
LOG_LEVEL=info
PORT=3000

# Database Configuration
# Set via Railway environment variables (SECRET)
DATABASE_URL=${DATABASE_URL}
DATABASE_POOL_SIZE=10
DATABASE_POOL_IDLE_TIMEOUT=30000
DATABASE_CONNECTION_TIMEOUT=5000
DATABASE_SSL=true
DATABASE_REPLICA_URL=${DATABASE_REPLICA_URL}

# MongoDB Configuration
MONGODB_URI=${MONGODB_URI}
MONGODB_RETRY_WRITES=true

# Redis Configuration
REDIS_URL=${REDIS_URL}
REDIS_MAX_RETRIES=3
REDIS_TIMEOUT=5000
REDIS_CLUSTER_ENABLED=false

# Security Secrets (managed via Railway Secret Manager)
JWT_SECRET=${JWT_SECRET}
JWT_EXPIRATION=30d
API_KEY_SECRET=${API_KEY_SECRET}
ENCRYPTION_KEY=${ENCRYPTION_KEY}

# Services Configuration
WORKER_CONCURRENCY=4
WORKER_QUEUE_NAME=staging

# Feature Flags
ENABLE_BLUE_GREEN_DEPLOYMENT=true
ENABLE_EXPERIMENTAL_FEATURES=false

# Monitoring
SENTRY_DSN=${SENTRY_DSN}
SENTRY_ENVIRONMENT=staging
SENTRY_TRACE_SAMPLE_RATE=0.1

# Logging
LOG_FORMAT=json
LOG_COLORIZE=false

# API Configuration
API_TIMEOUT=30000
API_RATE_LIMIT_ENABLED=true
API_RATE_LIMIT_WINDOW=900000
API_RATE_LIMIT_MAX=100

# CORS Configuration
CORS_ENABLED=true
CORS_ORIGINS=https://staging.example.com

# Session Configuration
SESSION_SECRET=${SESSION_SECRET}
SESSION_TIMEOUT=3600000
SESSION_STORE=redis

# Cache Configuration
CACHE_TTL_DEFAULT=3600
CACHE_TTL_SESSION=1800
CACHE_TTL_CONFIG=86400
CACHE_REDIS_NAMESPACE=staging

# Email Configuration
EMAIL_PROVIDER=sendgrid
EMAIL_FROM=staging@example.com
SENDGRID_API_KEY=${SENDGRID_API_KEY}

# External Services
GITHUB_TOKEN=${GITHUB_TOKEN}
GITHUB_WEBHOOK_SECRET=${GITHUB_WEBHOOK_SECRET}

# Third-party integrations
STRIPE_PUBLIC_KEY=${STRIPE_PUBLIC_KEY}
STRIPE_SECRET_KEY=${STRIPE_SECRET_KEY}

# Deployment
DEPLOYMENT_STRATEGY=blue-green
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=5
HEALTH_CHECK_PATH=/health

# Versioning
APP_VERSION=${APP_VERSION}
BUILD_ID=${BUILD_ID}
BUILD_TIMESTAMP=${BUILD_TIMESTAMP}
